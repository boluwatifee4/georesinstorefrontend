<div class="min-h-screen bg-gray-50/50 p-6">
  <div class="max-w-2xl mx-auto">
    <!-- Header with subtle gradient background -->
    <header class="mb-8 bg-gradient-to-r from-blue-500/10 to-blue-600/10 rounded-2xl p-6 backdrop-blur-sm">
      <div class="flex items-center space-x-4">
        <div class="p-3 bg-blue-600 bg-opacity-10 rounded-xl">
          <ng-icon name="lucideSettings" size="28" class="text-blue-600"></ng-icon>
        </div>
        <div>
          <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-blue-800">
            App Configuration
          </h1>
          <p class="text-gray-600 mt-1 text-sm">Manage your core application settings</p>
        </div>
      </div>
    </header>

    <!-- Loading State with improved animation -->
    <div *ngIf="loading()" class="min-h-[400px] flex flex-col justify-center items-center py-12">
      <div class="relative">
        <div class="w-12 h-12 rounded-full border-4 border-blue-200 animate-pulse"></div>
        <div class="absolute top-0 left-0 w-12 h-12 rounded-full border-t-4 border-blue-600 animate-spin"></div>
      </div>
      <p class="mt-4 text-gray-600 animate-pulse">Loading configuration...</p>
    </div>

    <!-- Error State with icon -->
    <div *ngIf="error() && !loading()"
         class="bg-red-50 border-l-4 border-red-500 rounded-lg p-4 mb-6">
      <div class="flex items-start">
        <ng-icon name="lucideAlertTriangle" size="20" class="text-red-500 mt-0.5"></ng-icon>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-red-800">Configuration Error</h3>
          <p class="mt-1 text-sm text-red-600">{{ error() }}</p>
        </div>
      </div>
    </div>

    <!-- Form with enhanced visual hierarchy -->
    <form *ngIf="!loading()" [formGroup]="form" (ngSubmit)="onSubmit()"
          class="space-y-6 bg-white rounded-2xl p-8 shadow-sm border border-gray-100">

      <!-- Bank Details Section -->
      <div class="space-y-6">
        <div class="flex items-center mb-6">
          <ng-icon name="lucideCreditCard" size="20" class="text-blue-600"></ng-icon>
          <h2 class="ml-2 text-lg font-semibold text-gray-900">Payment Details</h2>
        </div>

        <!-- Bank Name -->
        <div class="group">
          <label for="bankName" class="inline-flex items-center text-sm font-medium text-gray-700">
            Bank Name
            <span class="text-red-500 ml-1">*</span>
          </label>
          <div class="mt-1.5 relative">
            <input id="bankName"
                   type="text"
                   formControlName="bankName"
                   placeholder="e.g. First Bank"
                   class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg
                          transition-all duration-200 ease-in-out
                          focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500
                          group-hover:border-gray-300"
                   [class.border-red-300]="getFieldError('bankName')">
            <p *ngIf="getFieldError('bankName')" class="mt-1.5 text-xs text-red-500 flex items-center">
              <ng-icon name="lucideAlertCircle" size="12" class="mr-1"></ng-icon>
              {{ getFieldError('bankName') }}
            </p>
          </div>
        </div>

        <!-- Account Number with masking -->
        <div class="group">
          <label for="accountNumber" class="inline-flex items-center text-sm font-medium text-gray-700">
            Account Number
            <span class="text-red-500 ml-1">*</span>
          </label>
          <div class="mt-1.5 relative">
            <input id="accountNumber"
                   type="text"
                   maxlength="10"
                   formControlName="accountNumber"
                   placeholder="Enter 10-digit account number"
                   class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg font-mono
                          transition-all duration-200 ease-in-out tracking-widest
                          focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500
                          group-hover:border-gray-300"
                   [class.border-red-300]="getFieldError('accountNumber')">
            <p *ngIf="getFieldError('accountNumber')" class="mt-1.5 text-xs text-red-500 flex items-center">
              <ng-icon name="lucideAlertCircle" size="12" class="mr-1"></ng-icon>
              {{ getFieldError('accountNumber') }}
            </p>
          </div>
        </div>

        <!-- Account Name -->
        <div class="group">
          <label for="accountName" class="inline-flex items-center text-sm font-medium text-gray-700">
            Account Name
            <span class="text-red-500 ml-1">*</span>
          </label>
          <div class="mt-1.5 relative">
            <input id="accountName"
                   type="text"
                   formControlName="accountName"
                   placeholder="e.g. GEO RESIN STORE LTD"
                   class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg
                          transition-all duration-200 ease-in-out
                          focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500
                          group-hover:border-gray-300"
                   [class.border-red-300]="getFieldError('accountName')">
            <p *ngIf="getFieldError('accountName')" class="mt-1.5 text-xs text-red-500 flex items-center">
              <ng-icon name="lucideAlertCircle" size="12" class="mr-1"></ng-icon>
              {{ getFieldError('accountName') }}
            </p>
          </div>
        </div>
      </div>

      <!-- Communication Section -->
      <div class="space-y-6 pt-6 border-t border-gray-100">
        <div class="flex items-center mb-6">
          <ng-icon name="lucideMessageCircle" size="20" class="text-blue-600"></ng-icon>
          <h2 class="ml-2 text-lg font-semibold text-gray-900">Communication</h2>
        </div>

        <!-- WhatsApp Link -->
        <div class="group">
          <label for="whatsappLink" class="inline-flex items-center text-sm font-medium text-gray-700">
            WhatsApp Contact Link
            <span class="text-red-500 ml-1">*</span>
          </label>
          <div class="mt-1.5 relative">
            <div class="relative">
              <ng-icon name="lucideMessageSquare" size="16"
                      class="absolute left-4 top-3 text-white"></ng-icon>
              <input id="whatsappLink"
                     type="url"
                     formControlName="whatsappLink"
                     placeholder="https://wa.me/23480XXXXXXX"
                     class="w-full pl-11 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg
                            transition-all duration-200 ease-in-out
                            focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500
                            group-hover:border-gray-300"
                     [class.border-red-300]="getFieldError('whatsappLink')">
            </div>
            <p class="mt-1.5 text-xs text-gray-500 flex items-center">
              <ng-icon name="lucideInfo" size="12" class="mr-1"></ng-icon>
              Format: https://wa.me/&lt;number&gt; or https://api.whatsapp.com/send?phone=...
            </p>
            <p *ngIf="getFieldError('whatsappLink')" class="mt-1 text-xs text-red-500 flex items-center">
              <ng-icon name="lucideAlertCircle" size="12" class="mr-1"></ng-icon>
              {{ getFieldError('whatsappLink') }}
            </p>
          </div>
        </div>

        <!-- Checkout Note -->
        <div class="group">
          <div class="flex justify-between items-center mb-1.5">
            <label for="checkoutNote" class="text-sm font-medium text-gray-700">
              Checkout Note
            </label>
            <span class="text-xs px-2 py-0.5 rounded-full"
                  [class.bg-blue-50]="form.get('checkoutNote')?.value?.length > 0"
                  [class.text-blue-700]="form.get('checkoutNote')?.value?.length > 0"
                  [class.bg-gray-50]="!form.get('checkoutNote')?.value?.length"
                  [class.text-gray-500]="!form.get('checkoutNote')?.value?.length">
              {{ form.get('checkoutNote')?.value?.length || 0 }}/500
            </span>
          </div>
          <div class="relative">
            <textarea id="checkoutNote"
                     rows="4"
                     formControlName="checkoutNote"
                     placeholder="Add a note that will be shown to users during checkout (optional)"
                     class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg resize-none
                            transition-all duration-200 ease-in-out
                            focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500
                            group-hover:border-gray-300"
                     [class.border-red-300]="getFieldError('checkoutNote')">
            </textarea>
            <p *ngIf="getFieldError('checkoutNote')" class="mt-1.5 text-xs text-red-500 flex items-center">
              <ng-icon name="lucideAlertCircle" size="12" class="mr-1"></ng-icon>
              {{ getFieldError('checkoutNote') }}
            </p>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="pt-6 mt-6 border-t border-gray-100 flex justify-end">
        <button type="submit"
                [disabled]="form.invalid || loading()"
                class="inline-flex items-center px-6 py-2.5 text-sm font-medium rounded-lg
                       text-white bg-gradient-to-r from-blue-600 to-blue-700
                       hover:from-blue-700 hover:to-blue-800
                       focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:ring-offset-2
                       disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-blue-600 disabled:hover:to-blue-700
                       transition-all duration-200 ease-in-out
                       shadow-sm hover:shadow">
          <ng-icon *ngIf="!loading()" name="lucideSave" size="16" class="mr-2"></ng-icon>
          <ng-icon *ngIf="loading()" name="lucideLoader" size="16" class="mr-2 animate-spin"></ng-icon>
          <span>{{ loading() ? 'Saving Changes...' : 'Save Configuration' }}</span>
        </button>
      </div>
    </form>
  </div>
</div>
